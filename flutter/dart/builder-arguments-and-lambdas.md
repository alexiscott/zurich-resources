# Functions: List builder, arguments and anonymous functions

When creating a Flutter app, tutorials often give propose the creation of a Todo app.

One of the core features of the Todo app is to show a list of todo items and, to get there, you will need to copy the following snippet:

```dart
ListView.builder(
  itemCount: products.length,
  itemBuilder: (context, i) {
	return SingleToDo(products[i]);
  }
);
```

This tutorial is for people who learn Flutter as their first programming language and for programmers who have not worked with _modern_ programming concepts.

Flutter tutorials tend to focus on integrating widgets and data for creating an App. To get there, they tend to use _advanced_ programming concepts without making sure that the learner has a good understanding of them. This is fair, and it allows the new programmers to have a fast success and keep enthusiasm going. This tutorial is complementary to them and teaches you the programming and Dart skills you need to start better understanding the meaning of the building blocks you are asked to copy into your code.

For a beginner, it's not too hard to understand what this code does:

- It is a list builder and it builds a list.
- It has an `itemCount` with the number of items.
- The `itemBuilder` creates an item based on each product in the `products` list.

It's not very easy to keep the three types of brackets apart, but the snippet is short enough that after some tries and error the new programmer will be able to get it right.

More problems arise, when a typo is harder to detect or you want to create your own list: sudenly, there is a need to understand what exactly is going and on, what the single building blocks are and how the can be changed.

Here are the details:

- We call the `builder` constructor of the `ListView` class.
- The list will contain items that are built around the `products` list.
- `builder` is a function and is called with two named parameters: `itemCount` and `itemBuilder`.
- `itemCount` is an integer value.
- `itembuilder` is a callback.
- The value of `itemBuilder` is an anonymous function that accepts two parameters, `context` and `i`, and returns a `Widget`.

Some of it might sound trivial to you, other bits more like gibberish. At the end of this tutorial, you should have a basic understanding of all parts of it and have a clue on where to go to learn more about the missing parts.

Of course, in this tutorial, we cannot explain every single details and we will we will focus on what we consider the building blocks that are specific to understanding this snippet.

On the one side we have to assume that you already have learned some basics of Flutter and Dart. On the other side there are a few few concepts that that are not specific to this snippet and we will only introduce them very shortly:

- A _class_ is a collection of functions and values that perform a specific task.
- A _constructor_ is a function in a class that initializes and returns an instance of the same class (in other words: it returns an object of the type of the class).
- A _list_ is a variable containing a collection of values. The list has a specific length and the values can be accessed through their index.

The three definitions above are only very partial and there is much more to learn about those topic!

## How to play around with Dart


Most Flutter tutorial suggest to use Android Studio with the Flutter plugin. While Android Studio is a good tool for creating an App, it cannot – easily – be used for learning Dart itself.

If you're using Android Studio, we suggest you to use an online pad like [DartPad](https://dartpad.dev/):

- You can type the code in the online editor.
- You can run it with the blue "Run" button and you will see the output in the right pane.

If you're using Visual Studio Code:

- `ctrl-shift-p dart` and pick "Dart: New project". (You might need to activate the "Stagehand" plugin.)
- Pick "Simple Console Application"
- Set the name to something like "listbuilder" and pick the location on your disk where you put your code.
- Use "Run > Start debugging" or F5 to run the code in the `main` function.

## The main function

The most crucial building block in the above snippet: the _function_.

From your first lines of code in Flutter, you have been using functions. The first one has probably been the `main()` function.

The starting code generated by DartPad and Visual Code also have a `main()` function:

```dart
void main() {
  print('Hello world!');
}
```


or a slightly more complex version of the same:

```dart
void main(List<String> arguments) {
  print('Hello world!');
}
```

You should try to run the code and make sure that you get the "Hello world!" printed out.

`main` is a function. It is the main function: the function that is automatically called when a Dart program starts.

## What is a function

A function is a well delimited section of code that accomplish a specific task.  It typically receives some arguments, processes them and produces a result.

In Dart the main traits of a function are:

- A return type: it defines the type of result that the function will return. In the case of the `main` function, the `void` is a special type that  signifies that no result will be returned.
- A name – mostly a verb – that tells what the function does and that can be used to run the function.
- A list of argument


the Callback is a function or a method which we pass as an argument into another function or method and can perform an action when we require it.


## The steps



```dart
void main() {
  print('hey');
}
```

Output:

```
hey
```


```dart
void a() {
  print('hoi');
}

void main() {
  print('hey');
}
```

Output:

```
hey
```

```dart
void a() {
  print('hoi');
}

void main() {
  print('hey');
  a();
}
```

Output:

```
hey
hoi
```

```dart
void a(int num) {
  print('hoi $num');
}

void main() {
  print('hey');
  a(2);
}
```

Output:

```
hey
hoi 2
```

Now let's crecate an anonymous function that prints "ciao 2":

```dart
void a(int num) {
  print('hoi $num');
}

void main() {
  print('hey');
  var a = (int num) {
    print('ciao $num');
  };

  a(2);
}
```

Output:

```
hey
ciao 2
```

By the way, this is the same as:

```dart
void a(int num) {
  print('hoi $num');
}

void main() {
  void Function(int) a = (int num) {
    print('ciao $num');
  };

  a(2);
}
```

Now, instead of having two very similar functions `a`, let's create one function `a` that prints somethign and a function b` that returns an integer number:

```dart
void a(int num) {
  print('hoi $num');
}

void main() {
  var b = (int num) {
    return num * 2;
  };

  a(b());
}
```

Output:

```
hoi 4
```

Now, instead of getting the value of `b` and pass it to the `a` function as a numeric value, we can pass the whole function `a` to `b` and let `b` take the value out of `b()`:

```dart
void a(int num, int Function(int) f) {
  print('hoi $num ${f(5)}');
}

void main() {
  var b = (int num) {
    return num * 2;
  };

  a(2, b);
}
```

Output 

```
hoi 2 10
```

In dart we can have named function arguments (that, then often mandatory):

```dart
void a({int num, int Function(int) f}) {
  print('hoi $num ${f(5)}');
}

void main() {
  var b = (int num) {
    return num * 2;
  };

  a(num: 2, f: b);
}
```

Output:

```
hoi 2 10
```

And then write the `a`'s arguments _vertically_:

```dart
void a({int num, int Function(int) f}) {
  print('hoi $num ${f(5)}');
}

void main() {
  var b = (int num) {
    return num * 2;
  };

  a(
    num: 2,
    f: b,
  );
}
```

Output:

```
hoi 2 10
```

Finally, we don't need to first define `b` and then pass it to `a`: we can do it in one step:

```dart
void a({int num, int Function(int) f}) {
  print('hoi $num ${f(5)}');
}

void main() {
  a(
    num: 2,
    f: (int num) {
      return num * 2;
    });
}
```

Output:

```
hoi 2 10
```


Does it not look very similar to what we had at the begginning?

- if we rename the `a` function to `builder`, its arguments into `itemCount` and `itemBuilder` (instead of `num` and `f`,
- add a `String` argument to `b` called `context` (both when it's defined in `main` and when it's used in `a`),

then we have something that is very similar to a typical list view builder!


```dart
// irgendo in flutter definiert!
void builder ({int itemCount, var itemBuilder}) {
  print('hoi $itemCount ${itemBuilder('clonetext', 5)}');
}


void main() {
  // die parameter von builder sind definiert in 
  // https://api.flutter.dev/flutter/widgets/ListView/ListView.builder.html

  builder(
    itemCount: 5, 
    itemBuilder: (context, int i) {
      print(context);
      return i * 2;
    });
}
```

Output:

```
clonetext
hoi 2 10
```

